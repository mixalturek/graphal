<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>
<title>Graph Algorithms Interpreter</title>

<style media="all"><!--
body
{
	margin: 100px 20% 100px 20%;
	font-family: Verdana, "Bitstream Vera Sans", Geneva, sans-serif;
	font-size: 9pt;
	text-align: justify;
	line-height: 1.8em;
}

h1		{ text-align: center; }
h2		{ background-color: #ddddff; padding: 0.5em; text-align: center; border-top: 1px solid gray; margin-top: 3em; }
#copyright	{ background-color: #ddddff; text-align: center; border-top: 1px solid gray; margin-top: 5em; font-size: 8pt; }
table		{ margin: auto; max-width: 100%; }
tr		{ background-color: rgb(230,230,230); }
tr:hover	{ background-color: rgb(190,200,230); }
th, td		{ padding-left: 10px; padding-right: 10px; }
th		{ border: 1px solid rgb(160,160,160); }
a:hover		{ color: red; }
.img		{ text-align: center; }
.autor		{ font-weight: bold; text-align: center; }
.todo		{ color: red; }
.todo:before	{ content: "TODO: "}
pre		{ overflow: auto; line-height: 1.1em; max-height: 25em; border: 1px solid silver; padding: 1em; }
pre:hover	{ border: 1px solid gray; }
#screenshot	{ float: right; }
--></style>

<style media="print"><!--
body		{ margin: 0%; }
h2		{ text-align: left; border: none; }
a		{ text-decoration: none; }
--></style>

</head>

<body>

<h1>Graph Algorithms Interpreter</h1>
<p class="autor"><a href="http://woq.nipax.cz/">Michal Turek</a>, <a href="http://www.fel.cvut.cz/">FEL ÄŒVUT Praha</a></p>


<p>Abstract: The core of this diploma thesis is design and implementation of a special language based on C, which will be used for the graph manipulations. Integrated development environment was developed, it consists of the text editor for programmers, debugger and visualization window, in which the progress of the interpreted algorithm and graph can be displayed using 3D graphics.</p>


<!-- /////////////////////////////////////////////////////////////////// -->
<a id="content" href="#"></a>
<h2>Table of contents</h2>

<div id="screenshot"><a href="img/2009-06-26_22-55-54.png"><img src="img/2009-06-26_22-55-54_sm.png" width="250" height="156" alt="screenshot" /></a></div>

<ul>
<li><a href="#content">Table of contents</a></li>
<li><a href="#license">License</a></li>
<li><a href="#download">Download</a></li>
<li><a href="#tools">Development tools, dependencies, versions</a></li>
<li><a href="#compilation">Compilation</a></li>
<li><a href="#execution">Execution</a></li>
<li><a href="#grammar">Grammar, syntax, built-in functions</a></li>
</ul>


<!-- /////////////////////////////////////////////////////////////////// -->
<a id="license" href="#"></a>
<h2>License</h2>

<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; version 2 of the License.</p>

<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>

<p>You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.</p>


<!-- /////////////////////////////////////////////////////////////////// -->
<a id="download" href="#"></a>
<h2>Download</h2>

<p>ChangeLog and TODO files are attached to the archives.</p>

<ul>
<li><a href="down/bbd_svn196.tar.gz">Sun, 06 Sep 09 21:36:13 +0200, svn v196</a> - Visualizations</li>
<li><a href="down/bbd_svn179.tar.gz">Wed, 01 Jul 09 15:46:58 +0200, svn v179</a> - IDE completed</li>
<li><a href="down/bbd_svn147.tar.gz">Wed, 13 May 09 21:33:31 +0800, svn v147</a> - GUI</li>
<li><a href="down/bbd_svn125.tar.gz">Mon, 30 Mar 09 20:55:54 +0800, svn v125</a></li>
<li><a href="down/bbd_svn119.tar.gz">Sun, 22 Mar 09 21:46:08 +0700, svn v119</a></li>
<li><a href="down/bbd_svn99.tar.gz">Tue, 24 Feb 09 20:13:30 +0700, svn v99</a></li>
<li><a href="down/bbd_svn84.tar.gz">Fri, 30 Jan 09 13:31:09 +0100, svn v84</a></li>
</ul>


<!-- /////////////////////////////////////////////////////////////////// -->
<a id="tools" href="#"></a>
<h2>Development tools, dependencies, versions</h2>


<h3>Operating systems</h3>

<p>The development is in Debian Lenny GNU/Linux, the application was ported to MS Windows 2000 (VirtualBox) and MS Windows XP.</p>

<pre>
[woq@evm bbd]$ <strong>uname -a</strong>
Linux evm 2.6.26-1-686 #1 SMP Wed Nov 26 19:14:11 UTC 2008 i686 GNU/Linux
[woq@evm bbd]$
</pre>


<h3>Code::Blocks</h3>

<p><a href="http://www.codeblocks.org/">http://www.codeblocks.org/</a></p>

<pre>
[woq@evm bbd]$ <strong>apt-cache show codeblocks | grep Version</strong>
Version: 8.02
[woq@evm bbd]$
</pre>

<p>The version with integrated <em>GCC</em> and <em>GDB</em> (<em>codeblocks-8.02mingw-setup.exe</em>) was used under MS Windows.</p>


<h3>Qt, Qt Creator</h3>

<p><a href="http://www.qtsoftware.com/downloads">http://www.qtsoftware.com/downloads</a></p>

<pre>
[woq@evm ~]$ <strong>qtcreator -version 2>&amp;1 | grep Creator</strong>
Qt Creator 1.1.0 based on Qt 4.5.1
[woq@evm ~]$
</pre>

<p>The version <em>Qt libraries 4.5 for Windows (167 Mb)</em> (<em>qt-win-opensource-4.5.1-mingw.exe</em>) was used under MS Windows. The installer doesn't set the <em>PATH</em> variable, paths to <em>C:/Qt/4.5.1/bin</em> and <em>C:/MinGW/bin</em> directories have to be <a href="http://vlaurie.com/computers2/Articles/environment.htm">added manually</a>. The installer installs whole Qt including the documentation and the code samples, this parts can be deleted to save disk space.</p>


<h3>GNU Make</h3>

<pre>
[woq@evm bbd]$ <strong>make -v | grep Make</strong>
GNU Make 3.81
[woq@evm bbd]$
</pre>


<h3>GCC</h3>

<pre>
[woq@evm bbd]$ <strong>gcc -v | grep version</strong>
gcc version 4.3.2 (Debian 4.3.2-1.1)
[woq@evm bbd]$
</pre>


<h3>bison</h3>

<pre>
[woq@evm bbd]$ <strong>bison -V | grep bison</strong>
bison (GNU Bison) 2.3
[woq@evm bbd]$
</pre>


<h3>makedepend</h3>

<pre>
[woq@evm bbd]$ <strong>apt-cache show xutils-dev | grep Version</strong>
Version: 1:7.4+3
[woq@evm bbd]$
</pre>


<h3>Perl</h3>

<pre>
[woq@evm bbd]$ <strong>perl -v | grep 'This is perl'</strong>
This is perl, v5.10.0 built for i486-linux-gnu-thread-multi
[woq@evm bbd]$
</pre>


<h3>Meld</h3>

<pre>
[woq@evm bbd]$ <strong>apt-cache show meld | grep Version</strong>
Version: 1.1.5.1-2
[woq@evm bbd]$
</pre>


<h3>SVN</h3>

<pre>
[woq@evm bbd]$ <strong>svn --version | grep version</strong>
svn, version 1.5.1 (r32289)
[woq@evm bbd]$
</pre>


<!-- /////////////////////////////////////////////////////////////////// -->
<a id="compilation" href="#"></a>
<h2>Compilation</h2>


<h3>Makefile (CLI version, bbd)</h3>

<p>If you didn't change anything in the source package, run <em>make</em> with no parameters to compile the application.</p>

<p>Complete rebuild, including the sources code regeneration (<em>bison</em>, <em>gen_operators.pl</em>, <em>gen_builtin.pl</em>) and the settings of header files dependencies (<em>makedepend</em>), can be done using <em>make rebuild</em> command. Make sure that <a href="#tools">all necessary tools</a> are installed.</p>

<p>You may execute particular parts of the compilation separately (<em>make bison</em>, <em>make operators</em>, <em>make builtin</em>, <em>make build</em> etc.). See the content of <em>Makefile</em> for details.</p>

<pre>
[woq@evm diplomka]$ <strong>cd bbd/</strong>
[woq@evm bbd]$ <strong>make rebuild</strong>
rm -f bbd *.o core
bison -d -o parser.cpp parser.y
perl gen_operators.pl
Generating NodeUnarySub
Generating NodeUnaryNot
...
perl gen_builtin.pl
Generating NodeBuiltinEcho
Generating NodeBuiltinDump
...
makedepend -Y -m baseobject.cpp context.cpp ...
g++ -c baseobject.cpp -std=c++98 -pedantic -Wall
g++ -c context.cpp -std=c++98 -pedantic -Wall
...
g++ -o bbd baseobject.o context.o ...
[woq@evm bbd]$
</pre>


<h3>Code::Blocks (CLI version, bbd)</h3>

<p>Open the project, click on <em>Build</em> - <em>Build</em> menu item.</p>

<p>The environment is not set to call scripts for the source code generation, the files have to already exist. Run <em>make rebuild</em> and then build the application in Code::Blocks.</p>


<h3>Makefile (GUI version, bbdgui)</h3>

<pre>
[woq@evm diplomka]$ <strong>cd bbdgui/</strong>
[woq@evm bbdgui]$ <strong>make</strong>
g++ -c -pipe -g -Wall -W -D_REENTRANT -DQTGUI -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I../bbd -I. -I. -o main.o main.cpp
g++ -c -pipe -g -Wall -W -D_REENTRANT -DQTGUI -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I. -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I../bbd -I. -I. -o mainwindow.o mainwindow.cpp
...
g++  -o bbdgui main.o mainwindow.o ... -L/usr/lib -lpthread -lQtGui -lQtCore
[woq@evm bbdgui]$
</pre>


<h3>Qt Creator (GUI version, bbdgui)</h3>

<p>Open the project, click on <em>Build</em> - <em>Build All</em> menu item.</p>

<p>The environment is not set to call scripts for the source code generation, the files have to already exist. Run <em>make rebuild</em> and then build the application in Qt Creator.</p>


<!-- /////////////////////////////////////////////////////////////////// -->
<a id="execution" href="#"></a>
<h2>Execution</h2>


<h3>Graphic user interface, IDE</h3>

<pre>
[woq@evm diplomka]$ <strong>cd bbdgui/</strong>
[woq@evm bbdgui]$ <strong>./bbdgui</strong>
</pre>


<h3>Command line interpreter parameters</h3>

<pre>
[woq@evm diplomka]$ <strong>cd bbd/</strong>
[woq@evm bbd]$ <strong>./bbd</strong>
bbd [svn version 176]
Usage: ./bbd [-I&lt;directory&gt;] [--unit-tests] [--ast-dump] &lt;filename&gt; [parameters]

        -I&lt;directory&gt;
                Specify include directories (relative to the current working directory)
                -I&lt;directory_1&gt; -I&lt;directory_2&gt; ... -I&lt;directory_N&gt;

        --unit-tests
                Run unit tests

        --ast-dump
                Dump abstract syntax tree of the script

        filename
                File to be executed

        parameters
                Script parameters

[woq@evm bbd]$
</pre>


<h3>Script execution</h3>

<pre>
[woq@evm bbd]$ <strong>cat ../samples/01_factorial.txt</strong>
function factorial(number)
{
        if(number &lt; 2)
                return 1;
        else
                return number * factorial(number - 1);
}

// Enter to program
function main(argv)
{
        for(i = 0; i &lt; 10; i++)
                echo("Factorial of " + i + " is " + factorial(i) + "\n");

        return 0;
}
[woq@evm bbd]$ <strong>./bbd ../samples/01_factorial.txt</strong>
[i] bbd [svn version 79]
Function declaration at line: 1
Function declaration at line: 10
Factorial of 0 is 1
Factorial of 1 is 1
Factorial of 2 is 2
Factorial of 3 is 6
Factorial of 4 is 24
Factorial of 5 is 120
Factorial of 6 is 720
Factorial of 7 is 5040
Factorial of 8 is 40320
Factorial of 9 is 362880
[i] *** EXITING SCRIPT MAIN, OK ***
[i] Return value: 0
[i] Number of memory leaks: 0
[i] *** EXITING MAIN, OK ***
[woq@evm bbd]$
</pre>


<h3>Unit tests</h3>

<pre>
[woq@evm bbd]$ <strong>./bbd --unit-tests ../samples/tests.txt</strong>
bbd [svn version 176]
[i] [ OK ]     testMemoryLeaks
[i] [ OK ]     testDoubleDispatching
...
[i] Number of failed tests: 0
[i] *** ENTERING SCRIPT MAIN ***
Executing unit tests...
[ OK ]     testFactorial
[ OK ]     testArray
...
Number of failed tests: 0
[i] *** EXITING SCRIPT MAIN, OK ***
[i] Return value: NULL
[i] Number of memory leaks: 0
[i] *** EXITING MAIN, OK ***
[woq@evm bbd]$
</pre>


<h3>Dump of script abstract syntax tree</h3>

<pre>
[woq@evm bbd]$ <strong>./bbd --ast-dump ../samples/01_factorial.txt</strong>
[i] bbd [svn version 84]
Function declaration at line: 1
Function declaration at line: 10
&lt;Context&gt;
    &lt;BuiltinFunction name="echo" id="2" /&gt;
    &lt;BuiltinFunction name="dump" id="3" /&gt;
    &lt;BuiltinFunction name="array" id="4" /&gt;
    &lt;BuiltinFunction name="struct" id="5" /&gt;
    &lt;BuiltinFunction name="graph" id="6" /&gt;
    &lt;BuiltinFunction name="size" id="7" /&gt;
    &lt;Function name="factorial" id="9"&gt;
        &lt;Parameter name="number" id="10" /&gt;
        &lt;If&gt;
            &lt;Condition&gt;
                &lt;NodeBinaryLt&gt;
                    &lt;ValueIdentifier name="number" id="10"&gt;
                        &lt;NoValue /&gt;
                    &lt;/ValueIdentifier&gt;
                    &lt;ValueInt value="2" /&gt;
                &lt;/NodeBinaryLt&gt;
            &lt;/Condition&gt;
            &lt;IfSection&gt;
                &lt;NodeUnaryReturn&gt;
                    &lt;ValueInt value="1" /&gt;
                &lt;/NodeUnaryReturn&gt;
            &lt;/IfSection&gt;
            &lt;ElseSection&gt;
                &lt;NodeUnaryReturn&gt;
                    &lt;NodeBinaryMult&gt;
                        &lt;ValueIdentifier name="number" id="10"&gt;
                            &lt;NoValue /&gt;
                        &lt;/ValueIdentifier&gt;
                        &lt;FunctionCall name="factorial" id="9"&gt;
                            &lt;NodeBinarySub&gt;
                                &lt;ValueIdentifier name="number" id="10"&gt;
                                    &lt;NoValue /&gt;
                                &lt;/ValueIdentifier&gt;
                                &lt;ValueInt value="1" /&gt;
                            &lt;/NodeBinarySub&gt;
                        &lt;/FunctionCall&gt;
                    &lt;/NodeBinaryMult&gt;
                &lt;/NodeUnaryReturn&gt;
            &lt;/ElseSection&gt;
        &lt;/If&gt;
    &lt;/Function&gt;
    &lt;Function name="main" id="11"&gt;
        &lt;Parameter name="argv" id="12" /&gt;
        &lt;Loop&gt;
            &lt;Init&gt;
                &lt;NodeBinaryAss&gt;
                    &lt;ValueIdentifier name="i" id="13"&gt;
                        &lt;NoValue /&gt;
                    &lt;/ValueIdentifier&gt;
                    &lt;ValueInt value="0" /&gt;
                &lt;/NodeBinaryAss&gt;
            &lt;/Init&gt;
            &lt;Condition&gt;
                &lt;NodeBinaryLt&gt;
                    &lt;ValueIdentifier name="i" id="13"&gt;
                        &lt;NoValue /&gt;
                    &lt;/ValueIdentifier&gt;
                    &lt;ValueInt value="10" /&gt;
                &lt;/NodeBinaryLt&gt;
            &lt;/Condition&gt;
            &lt;Inc&gt;
                &lt;NodeUnaryIncPost&gt;
                    &lt;ValueIdentifier name="i" id="13"&gt;
                        &lt;NoValue /&gt;
                    &lt;/ValueIdentifier&gt;
                &lt;/NodeUnaryIncPost&gt;
            &lt;/Inc&gt;
            &lt;Body&gt;
                &lt;FunctionCall name="echo" id="2"&gt;
                    &lt;NodeBinaryAdd&gt;
                        &lt;NodeBinaryAdd&gt;
                            &lt;NodeBinaryAdd&gt;
                                &lt;NodeBinaryAdd&gt;
                                    &lt;ValueString value="Factorial of " /&gt;
                                    &lt;ValueIdentifier name="i" id="13"&gt;
                                        &lt;NoValue /&gt;
                                    &lt;/ValueIdentifier&gt;
                                &lt;/NodeBinaryAdd&gt;
                                &lt;ValueString value=" is " /&gt;
                            &lt;/NodeBinaryAdd&gt;
                            &lt;FunctionCall name="factorial" id="9"&gt;
                                &lt;ValueIdentifier name="i" id="13"&gt;
                                    &lt;NoValue /&gt;
                                &lt;/ValueIdentifier&gt;
                            &lt;/FunctionCall&gt;
                        &lt;/NodeBinaryAdd&gt;
                        &lt;ValueString value="
" /&gt;
                    &lt;/NodeBinaryAdd&gt;
                &lt;/FunctionCall&gt;
            &lt;/Body&gt;
        &lt;/Loop&gt;
        &lt;NodeUnaryReturn&gt;
            &lt;ValueInt value="0" /&gt;
        &lt;/NodeUnaryReturn&gt;
    &lt;/Function&gt;
    &lt;StringTable&gt;
        &lt;string id="0"&gt;a&lt;/string&gt;
        &lt;string id="1"&gt;b&lt;/string&gt;
        &lt;string id="2"&gt;echo&lt;/string&gt;
        &lt;string id="3"&gt;dump&lt;/string&gt;
        &lt;string id="4"&gt;array&lt;/string&gt;
        &lt;string id="5"&gt;struct&lt;/string&gt;
        &lt;string id="6"&gt;graph&lt;/string&gt;
        &lt;string id="7"&gt;size&lt;/string&gt;
        &lt;string id="8"&gt;../samples/01_factorial.txt&lt;/string&gt;
        &lt;string id="9"&gt;factorial&lt;/string&gt;
        &lt;string id="10"&gt;number&lt;/string&gt;
        &lt;string id="11"&gt;main&lt;/string&gt;
        &lt;string id="12"&gt;argv&lt;/string&gt;
        &lt;string id="13"&gt;i&lt;/string&gt;
    &lt;/StringTable&gt;
&lt;/Context&gt;
Factorial of 0 is 1
Factorial of 1 is 1
Factorial of 2 is 2
Factorial of 3 is 6
Factorial of 4 is 24
Factorial of 5 is 120
Factorial of 6 is 720
Factorial of 7 is 5040
Factorial of 8 is 40320
Factorial of 9 is 362880
[i] *** EXITING SCRIPT MAIN, OK ***
[i] Return value: 0
[i] Number of memory leaks: 0
[i] *** EXITING MAIN, OK ***
[woq@evm bbd]$
</pre>


<!-- /////////////////////////////////////////////////////////////////// -->
<a id="grammar" href="#"></a>
<h2>Grammar, syntax, built-in functions</h2>

<p>See <em>parser.y</em> file for the language grammar. Preprocesor can include files and define simple macros, position in the source files can be passed to the script using predefined macros. All these constructs are processed during the script parsing.</p>

<pre>
__FILE__
__LINE__
__FUNCTION__

include("filename");
define("name", "value");


// Example of usage, samples/tests.txt
define("tverify", "result = result &amp;&amp; verify");

function testFactorial()
{
	result = true;

	tverify(factorial(1) == 1);
	tverify(factorial(2) == 2);
	tverify(factorial(3) == 6);

	return testResult(__FUNCTION__, result);
}
</pre>


<p>The functions can be called using two possible, equivalent, methods. If the dot notation is used, the object is automatically passed to the first parameter.</p>

<pre>
function func(par1, par2, par3)
{
	// Code
}

func(par1, par2, par3);
par1.func(par2, par3);


g = graph();
v1 = generateVertex(g);
v2 = g.generateVertex();
</pre>


<p>The list of interpreter built-in functions, their parameters and return values can be displayed using <em>make listbuiltin</em> command.</p>

<pre>
[woq@evm bbd]$ <strong>make listbuiltin</strong>
echo(object) : object
dump(object) : object
exit(object) : null
...
[woq@evm bbd]$
</pre>


<div id="copyright">
Copyright &copy; 2008, 2009 <a href="http://woq.nipax.cz/">Michal Turek</a>
</div>


</body>
</html>
